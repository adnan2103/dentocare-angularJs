<div class="container-fluid">
    <form name="myForm">
        <div class="row">
            <div class="col-md-4" ng-if='patient.id' ng-show="hasAccess('PIMM')">
                <img class="img-responsive" ng-src="{{patient.imagePath}}" onerror="this.src='front-end/src/images/patients/patient.svg'"/>
                <div class="row">
                    <div class="col-sm-8">
                        <input class="form-control" type="file" file-model="image"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <button class="btn btn-primary" ng-click="saveImage(patient.id)">Update Photo</button>
                    </div>

                </div>
            </div>

            <div class="col-md-8">
                <div class="row">
                    <div class="col-sm-3">
                        <span>Name :</span>
                    </div>
                    <div class="col-sm-5">
                        <input type="text" class="form-control" name="name" maxlength="100" ng-model="patient.name" placeholder="Patient Name" required="required"/>
                    </div>
                    <div class="col-sm-4">
                        <span ng-show="myForm.$submitted || myForm.name.$touched">
                            <span class="alert alert-danger" role="alert" ng-show="myForm.name.$error.required">Tell us your name.</span>
                        </span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-3">
                        <span>Gender :</span>
                    </div>
                    <div class="col-sm-5">
                        <select ng-model="patient.gender" class="form-control">
                            <option ng-repeat="gender in gender" value="{{gender.gender}}">{{gender.gender}}</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <span>Age :</span>
                    </div>
                    <div class="col-sm-5">
                        <span><input type="text" class="form-control" name="age" maxlength="2" ng-model="patient.age" ng-pattern="/^([0-9]*)$/" placeholder="Age" required="required" /></span>
                    </div>
                    <div class="col-sm-4">
                        <span class="alert alert-danger" role="alert" ng-show="myForm.age.$error.pattern">Invalid Age.</span>
                        <span ng-show="myForm.$submitted || myForm.age.$touched">
                                <span class="alert alert-danger" role="alert" ng-show="myForm.age.$error.required">Enter Age.</span>
                        </span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-8">
                        <hr />
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <span><b> Contact Details : </b></span>
                    </div>
                </div>

                <div ng-repeat="contact in patient.contactList">

                    <div class="row">
                        <div class="col-sm-3">
                            <span>Primary Mobile No :</span>
                        </div>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" name="primaryPhoneNumber" maxlength="10" ng-model="contact.primaryPhoneNumber" ng-pattern="/^([0-9]*)$/" placeholder="10 digit Mobile No" required="required"/>
                        </div>
                        <div class="col-sm-4">
                            <span class="alert alert-danger" role="alert" ng-show="myForm.primaryPhoneNumber.$error.pattern">Invalid phone no.</span>
                            <span ng-show="myForm.$submitted || myForm.primaryPhoneNumber.$touched">
                                <span class="alert alert-danger" role="alert" ng-show="myForm.primaryPhoneNumber.$error.required">Enter mobile no.</span>
                            </span>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-sm-3">
                            <span>Additional Mobile No:</span>
                        </div>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" name="secondaryPhoneNumber" maxlength="10" ng-model="contact.secondaryPhoneNumber" ng-pattern="/^([0-9]*)$/" placeholder="10 digit Mobile No" required="required"/>
                        </div>
                        <div class="col-sm-4">
                            <span class="alert alert-danger" role="alert" ng-show="myForm.secondaryPhoneNumber.$error.pattern">Invalid phone no.</span>
                            <span ng-show="myForm.$submitted || myForm.secondaryPhoneNumber.$touched">
                                <span class="alert alert-danger" role="alert" ng-show="myForm.secondaryPhoneNumber.$error.required">Enter mobile no.</span>
                            </span>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-sm-3">
                            <span>Email Id :</span>
                        </div>
                        <div class="col-sm-5">
                            <span><input type="text" class="form-control" name="email" maxlength="50" ng-model="contact.email" /></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-8">
                            <hr />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <span><b> Address : </b></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-3">
                            <span><input type="text" class="form-control" maxlength="50" ng-model="contact.addressLine1" placeholder="Address line 1"/></span>
                        </div>
                        <div class="col-sm-5">
                            <span> <input type="text" class="form-control" maxlength="50" ng-model="contact.addressLine2"  placeholder="Address line 2"/></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-3">
                            <span><input type="text" class="form-control" maxlength="30" ng-model="contact.city" placeholder="City" ng-init="contact.city='Bhopal'"/></span>
                        </div>
                        <div class="col-sm-5">
                            <span> <input type="text" class="form-control" maxlength="30" ng-model="contact.state" placeholder="State" ng-init="contact.state='MP'"/></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-3">
                            <span><input type="text" class="form-control" maxlength="20" ng-model="contact.country" placeholder="Country" ng-init="contact.country='India'"/></span>
                        </div>
                        <div class="col-sm-5">
                            <span> <input type="text" class="form-control" maxlength="6" ng-model="contact.pincode" placeholder="Pin code" ng-init="contact.pincode='462001'"/></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-8">
                            <hr />
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-sm-3" ng-show="hasAccess('PMM')">
                        <span><button type="submit" class="btn btn-primary" ng-click="savePatient(patient)">Add/Update Patient</button></span>
                    </div>
                    <div class="col-sm-8" ng-if='patient.id' ng-show="hasAccess('AMM')" >
                        <span><a href="#/patients/{{patient.id}}/appointments" class="btn btn-md btn-primary">Give Appointment</a></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-8">
                <hr />
                <br/>
            </div>
        </div>
    </form>
</div>